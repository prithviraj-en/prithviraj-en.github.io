{"componentChunkName":"component---src-templates-post-template-js","path":"/workout-timer/","result":{"data":{"post":{"id":"72b8122a-0299-5959-8497-da6c67ea5211","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50ce145c95de5d02140b4d365f7bb312/c08c5/chase-kinney-FMQBLyhD2HU-unsplash.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 640px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAUBBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAHHKKqiE//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhIQ/9oACAEBAAEFAtSS5TVS+M0z/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BGf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAMBAQAAAAAAAAAAAAAAAAARMSEQ/9oACAEBAAY/Am9LhV2n/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAQRAhMVH/2gAIAQEAAT8hQey3Ebaj9gNkciyQI//aAAwDAQACAAMAAAAQCC//xAAWEQEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQMBAT8QwSv/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAGhAAAwEBAQEAAAAAAAAAAAAAAREhADFBcf/aAAgBAQABPxAuSxM03PgXd3UC6Ih+e4H8oibhzACEc2BAx3f/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"unsplash.com\"\n        title=\"\"\n        src=\"/static/50ce145c95de5d02140b4d365f7bb312/c08c5/chase-kinney-FMQBLyhD2HU-unsplash.jpg\"\n        srcset=\"/static/50ce145c95de5d02140b4d365f7bb312/e07e9/chase-kinney-FMQBLyhD2HU-unsplash.jpg 200w,\n/static/50ce145c95de5d02140b4d365f7bb312/066f9/chase-kinney-FMQBLyhD2HU-unsplash.jpg 400w,\n/static/50ce145c95de5d02140b4d365f7bb312/c08c5/chase-kinney-FMQBLyhD2HU-unsplash.jpg 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><a href=\"https://www.healthline.com/nutrition/benefits-of-hiit\">High Intensity Interval Training</a> has been catching on lately (or maybe I have finally caught up with it). It seems like an awesome way to workout in the confines of my home. They are basically short bursts of intense exercise followed by a rest period. The workouts require a way to keep track of the time and the reps. Unfortunately there seems to be no app (web or otherwise) catering to this specific need. So I thought, what the hell, I’ll just build one on my own. </p>\n<h3>The Tech</h3>\n<p>Nothing fancy, just some javascript. I used <a href=\"https://reactnative.dev/\">React-Native</a> for the app. The app has been tested only on Android. Testing on Apple products is in the works.\nThe main idea is to take the number of repetitions, repetition time and rest time as inputs. Then have a timer run down from rep-time to 0, rest-time to 0 and repeat for number of reps. Beep whenever the app state changes from rep. to rest. Simple enough. The timer can be handled using javascipt’s <strong>setInterval</strong> function.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/756b15ecb9313776c648cdd0f581b80e/eea4a/marathon-2346948_1280.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 800px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABxnNrKeXjP//EABoQAAIDAQEAAAAAAAAAAAAAAAECAAMxBBL/2gAIAQEAAQUCrZmmt4BgnMxttO//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAEAAQUBAAAAAAAAAAAAAAABAAMQERIhMf/aAAgBAQAGPwLxSOScGcmtR2Lf/8QAGhABAAIDAQAAAAAAAAAAAAAAAQAhETFhUf/aAAgBAQABPyGw6MEIqbMzfaekreQ8YfaIuGVU/9oADAMBAAIAAwAAABDTL//EABgRAAIDAAAAAAAAAAAAAAAAAAABESEx/9oACAEDAQE/EKWks//EABURAQEAAAAAAAAAAAAAAAAAABEA/9oACAECAQE/EFi//8QAHhABAAICAgMBAAAAAAAAAAAAAQARITFBcVGBocH/2gAIAQEAAT8QY4TZLprMOdMmFbv8gW79aHq3PcF1haUH5CsVHsU1fn3GiMBxP//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"pixabay.com\"\n        title=\"\"\n        src=\"/static/756b15ecb9313776c648cdd0f581b80e/4b190/marathon-2346948_1280.jpg\"\n        srcset=\"/static/756b15ecb9313776c648cdd0f581b80e/e07e9/marathon-2346948_1280.jpg 200w,\n/static/756b15ecb9313776c648cdd0f581b80e/066f9/marathon-2346948_1280.jpg 400w,\n/static/756b15ecb9313776c648cdd0f581b80e/4b190/marathon-2346948_1280.jpg 800w,\n/static/756b15ecb9313776c648cdd0f581b80e/e5166/marathon-2346948_1280.jpg 1200w,\n/static/756b15ecb9313776c648cdd0f581b80e/eea4a/marathon-2346948_1280.jpg 1280w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>I ran into issues as soon as I started writing the logic. It turns out, React-Native does not handle the setInterval function well. Reading and updating state variables from inside a setInterval block is not a trivial matter. After hours of googling &#x26; searching on <a href=\"https://stackoverflow.com/questions/26348557/issue-accessing-state-inside-setinterval-in-react-js\">StackOverflow</a>, I figured out a way to use react-native’s <a href=\"https://reactjs.org/docs/hooks-effect.html\">hooks</a> functionality, specifically <strong>useEffects</strong> to get it to work. Another issue I ran into, was the setInterval delay timer. Since react-native runs only on one thread, it is <a href=\"https://andrewduthie.com/2013/12/31/creating-a-self-correcting-alternative-to-javascripts-setinterval/\">not guaranteed</a> that setInterval will actally run exactly after every <em>delay</em> milliseconds. This is quite a fundamental issue and the only way to alleviate this is to have self-correcting logic inside the setInterval block using <em>performance.now</em>. I borrowed the coed for the self-adjusting <em>setInterval</em> function from <a href=\"https://andrewduthie.com/2013/12/31/creating-a-self-correcting-alternative-to-javascripts-setinterval/\">andrewduthie.com</a>. I used johnsonsu’s <a href=\"https://github.com/johnsonsu/react-native-sound-player#readme\">react-native-sound-player</a> for the beep functionality . A functionality, I added in later is the ability to keep the screen awake while the app is being used. For this, I used sayem314’s <a href=\"https://www.npmjs.com/package/@sayem314/react-native-keep-awake\">react-native-keep-awake</a> package.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isPaused<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setCurrTime</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currTime</span> <span class=\"token operator\">=></span> currTime <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currTime <span class=\"token operator\">>=</span> repTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> isResting<span class=\"token operator\">==</span><span class=\"token boolean\">false</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">//TODO - beep</span>\n          <span class=\"token function\">setCurrTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setResting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currTime <span class=\"token operator\">>=</span> restTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> isResting<span class=\"token operator\">==</span><span class=\"token boolean\">true</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">//TODO - beep</span>\n          <span class=\"token function\">setCurrTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setResting</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setCurrRep</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentRep</span> <span class=\"token operator\">=></span> currentRep <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isPaused<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>isPaused<span class=\"token punctuation\">,</span>currTime<span class=\"token punctuation\">,</span>repTime<span class=\"token punctuation\">,</span>isResting<span class=\"token punctuation\">,</span>restTime<span class=\"token punctuation\">,</span>currentRep<span class=\"token punctuation\">,</span>sets<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The next part that bothered me was the UI and the color scheme. Aesthetic Design does not come to me easily. But I found an awesome resource for figuring out the color schemes - <a href=\"https://coolors.co/\">Coolors</a>. It generates random color palettes that work well together.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d4ef3fdafd10b3ee4b36fab29838815f/02e66/app-screenshot.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 405px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 188.49999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAmABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIEBQED/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGHLsTFJoJ8I6CzVew1kdFgK//EAB0QAAEDBQEAAAAAAAAAAAAAAAEAAgMEEBEUMRL/2gAIAQEAAQUC1gtVqNLYXwm8AyzwpOitkA3pEat5X//EABYRAQEBAAAAAAAAAAAAAAAAABEQIP/aAAgBAwEBPwFhj//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EAB0QAAEEAgMAAAAAAAAAAAAAAAACEDEyAREScaH/2gAIAQEABj8CuXLNDx5hk9E5bXFJVJCT/8QAIRAAAgICAgEFAAAAAAAAAAAAAAERMSFBUXEQgZGhsfD/2gAIAQEAAT8hkSnTgk39hKqfoN4XS+jB2HSGlNLWlwQ4BibY1hXXh09CRRUbPwsfy/mP/9oADAMBAAIAAwAAABDk177/AP8A/8QAGBEBAQEBAQAAAAAAAAAAAAAAAQARITH/2gAIAQMBAT8Q32FSYeWFhf/EABgRAQEAAwAAAAAAAAAAAAAAAAARARAh/9oACAECAQE/EOquphH/xAAgEAEAAgIBBQEBAAAAAAAAAAABABEhQTFRYaHB0XHw/9oACAEBAAE/EBwwoaONly1C0XhL03KHq3js6JTAN4ymPM8X2xitmuSadWfxnuAEAMuADfbEAGKl4rhKXe6+T5KlJXb+sCCBCzgY6wvLq3j6gYdCsH1P/9k='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;\"\n        alt=\"app screenshot\"\n        title=\"\"\n        src=\"/static/d4ef3fdafd10b3ee4b36fab29838815f/02e66/app-screenshot.jpg\"\n        srcset=\"/static/d4ef3fdafd10b3ee4b36fab29838815f/e07e9/app-screenshot.jpg 200w,\n/static/d4ef3fdafd10b3ee4b36fab29838815f/066f9/app-screenshot.jpg 400w,\n/static/d4ef3fdafd10b3ee4b36fab29838815f/02e66/app-screenshot.jpg 405w\"\n        sizes=\"(max-width: 405px) 100vw, 405px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>This app only took about 2 days for me to create from scratch. I’ll try to make the UI more appealling. Get some <a href=\"https://material-ui.com/\">material design</a> components, make the timer look like an actual timer instead of just text. Maybe display some ads and earn some money (why not!!).</p>","fields":{"slug":"/workout-timer/","prefix":"2020-07-22"},"frontmatter":{"title":"Cardio HIIT Timer App in React-Native","author":"pete jadhav","category":"technology","cover":{"childImageSharp":{"resize":{"src":"/static/756b15ecb9313776c648cdd0f581b80e/9dc27/marathon-2346948_1280.jpg"}}}}},"authornote":{"id":"caf4a2b1-8ffb-53f9-99fb-78d81d382c4e","html":"<p><strong>Pete Jadhav</strong> - To Infinity &#x26; Beyond</p>"},"site":{"siteMetadata":{"facebook":{"appId":""}}}},"pageContext":{"slug":"/workout-timer/","prev":{"id":"a15aa707-956a-5201-93bc-f90ccd03597d","fields":{"slug":"/like-nonsense/","prefix":"2017-10-21","source":"posts"},"frontmatter":{"title":"I like nonsense, it wakes up the brain cells","category":"testimonies"}},"source":"posts"}}}